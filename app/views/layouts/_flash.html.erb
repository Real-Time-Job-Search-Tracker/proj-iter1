<div id="toast-container"></div>

<script>
  function showToasts() {
    const flashes = <%= flash.to_h.to_json.html_safe %>;
    const container = document.getElementById("toast-container");
    if (!container) return;

    Object.entries(flashes).forEach(([type, msg]) => {
      if (!msg) return;

      const toast = document.createElement("div");
      toast.className = `toast toast-${type}`;
      toast.textContent = msg;
      container.appendChild(toast);

      setTimeout(() => toast.classList.add("show"), 10);
      setTimeout(() => {
        toast.classList.remove("show");
        setTimeout(() => toast.remove(), 300);
      }, 2500);
    });
  }

  document.addEventListener("turbo:load", showToasts);
  document.addEventListener("DOMContentLoaded", showToasts);
</script>
